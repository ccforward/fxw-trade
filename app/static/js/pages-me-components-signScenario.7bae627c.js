(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-me-components-signScenario"],{"096b":function(t,i,e){"use strict";var a=e("4ea4");e("4160"),e("a434"),e("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("5530")),s={data:function(){return{scenario:{page:0,size:10,list:[],hasMore:!0},isActionShow:!0,isSign:!1,pageNum:1,userId:uni.getStorageSync("userInfo").user_id}},created:function(){this.getList()},onBackPress:function(t){return uni.$emit("signScenario"),uni.switchTab({url:"/pages/me/me"}),!0},methods:{back:function(){uni.navigateBack()},signLike:function(t){this.$request({action:"script/like",data:{user_id:this.userId,script_id:this.scenario.list[t].script_id}})},signPlayed:function(t){this.$request({action:"script/played",data:{user_id:this.userId,script_id:this.scenario.list[t].script_id}})},notInterested:function(){this.$request({action:"script/notInterested",data:{user_id:this.userId,script_id:this.scenario.list[this.scenario.list.length-1].script_id}}),this.isSign=!0,this.removeItem(this.scenario.list.length-1)},getList:function(){var t=this;this.scenario.hasMore?(uni.showLoading({title:"加载中",mask:!0}),this.scenario.page++,this.$request({action:"script/recommendScripts",data:{user_id:this.userId,page:1,size:10}}).then((function(i){t.scenario.hasMore=t.scenario.size*t.scenario.page<i.metadata.total,i.data.list.forEach((function(i,e){t.scenario.list.unshift((0,n.default)((0,n.default)({},i),{},{id:String(e)+String(10),x:0,y:0,old:{x:0,y:0}}))})),uni.hideLoading()}))):uni.hideLoading()},likeOrPlayed:function(t){this.isSign=!0,this.removeItem(this.scenario.list.length-1,t),this["like"==t?"signPlayed":"signLike"](this.scenario.list.length-1)},onMovableChange:function(t,i){var e=this.scenario.list[i],a=t.detail,n=a.x,s=a.y,o=a.source;e.old.x=n,e.old.y=s,0==n||this.isSign?this.isActionShow=!0:this.isActionShow=!n,"friction"==o&&this.onMovableEnd(i)},onMovableEnd:function(t){var i=this.scenario.list[t],e=i.old,a=e.x;e.y;a>=20?this.likeOrPlayed("like"):a<=-20?this.likeOrPlayed("unlike"):this.resetItem(t)},removeItem:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"like",a=this.scenario.list[t];a.x=a.old.x,a.y=a.old.y,this.$nextTick((function(){a.x="like"==e?1e3:-1e3,a.y=a.old.y<=0?a.old.y-100:a.old.y+100,setTimeout((function(){i.scenario.list.splice(t,1),i.isSign=!1,i.scenario.list.length<3&&!i.scenario.hasMore&&i.getList()}),200)}))},resetItem:function(t){var i=this.scenario.list[t];i.x=i.old.x,i.y=i.old.y,this.$nextTick((function(){i.x=0,i.y=0}))}}};i.default=s},1980:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return a}));var n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"warp"},[t.scenario.list.length?[a("v-uni-movable-area",[t._l(t.scenario.list,(function(i,n){return[a("v-uni-movable-view",{key:n+"_0",attrs:{damping:20,x:i.x,y:i.y,inertia:!0,"out-of-bounds":!0,direction:"all"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.onMovableChange(i,n)}}},[a("v-uni-view",{class:{item:!0,"item-shadow":n==t.scenario.list.length-1},style:{position:"relative",zIndex:n+1,transition:"all .3s"}},[a("v-uni-view",{staticClass:"item-top"},[a("v-uni-view",{staticClass:"name"},[t._v(t._s(i.script_name))]),a("v-uni-view",{staticClass:"score"},[a("v-uni-text",{staticClass:"score-total"},[t._v(t._s(i.score.total))]),a("v-uni-image",{staticClass:"score-bg",attrs:{src:e("faf1")}})],1)],1),a("v-uni-view",{staticClass:"theme"},[t._v(t._s(i.type)+"/"+t._s(i.theme))]),a("v-uni-view",{staticClass:"item-avatar"},[a("v-uni-image",{attrs:{src:i.imgs[0]?i.imgs[0]:"/static/default__me_avatar.png"}})],1)],1),t.isActionShow?a("v-uni-view",{staticClass:"action"},[a("v-uni-view",{staticClass:"action-item item-shadow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.likeOrPlayed("unlike")}}},[a("v-uni-image",{staticClass:"action-like",attrs:{src:"/static/like.png"}})],1),a("v-uni-view",{staticClass:"action-item item-shadow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.likeOrPlayed("like")}}},[a("v-uni-image",{staticClass:"action-played",attrs:{src:"/static/played.png"}})],1)],1):t._e()],1)]}))],2),a("v-uni-view",{staticClass:"footer"},[a("v-uni-view",{staticClass:"footer-item item-shadow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.notInterested.apply(void 0,arguments)}}},[t._v("跳过")]),a("v-uni-view",{staticClass:"footer-item item-shadow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.back.apply(void 0,arguments)}}},[t._v("完成")])],1)]:a("v-uni-view",{staticClass:"empty",attrs:{align:"center"}},[a("v-uni-image",{staticClass:"empty-img",attrs:{src:"/static/empty_data.png"}}),a("v-uni-view",{staticClass:"empty-button"},[t._v("没有更多可标记的剧本了哦")])],1)],2)},s=[]},"1cb6":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".footer[data-v-248243da]{position:absolute;top:83%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;width:100%}.footer-item[data-v-248243da]{width:%?300?%;height:%?90?%;font:500 %?36?% PingFang SC;text-align:center;line-height:%?90?%;color:#000;background:#fff;border-radius:%?45?%}.action[data-v-248243da]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;position:absolute;bottom:0;z-index:99;width:%?564?%}.action-played[data-v-248243da]{width:%?60?%;height:%?60?%}.action-like[data-v-248243da]{width:%?60?%;height:%?58?%}.action-item[data-v-248243da]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?130?%;height:%?130?%;background:#fff;border-radius:%?65?%}.empty[data-v-248243da]{margin-top:%?80?%}.empty-button[data-v-248243da]{margin:0 auto;width:%?336?%;height:%?70?%;font:500 %?26?% PingFang SC;color:#333;text-align:center;line-height:%?70?%;border-radius:%?35?%}.empty-img[data-v-248243da]{margin-bottom:%?39?%;width:%?252?%;height:%?268?%}.warp[data-v-248243da]{height:calc(100vh - 0px - 44px - var(--window-bottom));background:#fff;overflow:hidden}.warp uni-movable-area[data-v-248243da]{position:relative;width:300vw;height:300vh;left:calc(-100vw);top:calc(-105vh)}.warp uni-movable-view[data-v-248243da]{position:absolute;top:%?-240?%;right:0;bottom:0;left:0;margin:auto;width:%?564?%;height:%?706?%}.warp .item[data-v-248243da]{position:relative;padding-bottom:%?40?%;width:%?564?%;background:#fff;border-radius:%?10?%}.warp .item-shadow[data-v-248243da]{-webkit-box-shadow:0 0 %?30?% 0 rgba(0,0,0,.2);box-shadow:0 0 %?30?% 0 rgba(0,0,0,.2)}.warp .item-avatar[data-v-248243da]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.warp .item-avatar uni-image[data-v-248243da]{width:%?484?%;height:%?521?%}.warp .item-top[data-v-248243da]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.warp .score[data-v-248243da]{margin-right:%?43?%;position:relative}.warp .score-total[data-v-248243da]{position:absolute;top:38%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1;font:normal %?36?% Roboto;color:#fff}.warp .score-bg[data-v-248243da]{width:%?72?%;height:%?73?%}.warp .name[data-v-248243da]{vertical-align:middle;margin:%?29?% 0 0 %?40?%;font:700 %?40?% PingFang SC;color:#333}.warp .theme[data-v-248243da]{margin:%?19?% 0 %?30?% %?40?%;font:500 %?30?% PingFang SC;color:#999}",""]),t.exports=i},"1ff9":function(t,i,e){"use strict";e.r(i);var a=e("1980"),n=e("38be");for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("c6bc");var o,r=e("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"248243da",null,!1,a["a"],o);i["default"]=c.exports},"38be":function(t,i,e){"use strict";e.r(i);var a=e("096b"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a},c6bc:function(t,i,e){"use strict";var a=e("f4aa"),n=e.n(a);n.a},f4aa:function(t,i,e){var a=e("1cb6");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("60ffa808",a,!0,{sourceMap:!1,shadowMode:!1})},faf1:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABJCAYAAACesWDiAAABQ0lEQVR4AezQwQAAAAgEsGjy14jqIjiDPSawyW3oBAkSJEiQIEGCBCFIkCBBggQJEoQgQYIECRIkSBCCBAkSJEiQIEGCECRIkCBBggQJQpAgQYIECRIkCEGCBAkSJEiQoC+fDiAaCMAwDP+VJkSEjEAgEIgiICBAIFQBgQABgRUEBAgEwggIEBAITiAgEIQLIkKOSg+ACSfbz3V4PgC8fCneuWCZFfpUrQ/EAwfMEAO69CjbFuiDS9aIGjpsU/z3QI8cMkv8Rfb9MgJVXLHOGDEkXY4pmxroiSPmiBHqsEPRhECfXLPBOJGs/v2SAz3TY57IV/9+mYG+uGGTCSJf/ftlBnrhlAWiQVbpU40i0De3bDFJNFiXE8phBHrljEUiW/796ge6Y48pogUG7vd7oDfOWSIaIeF+Ye7ZZ5qA1uuwS/ED2J/7Xg3CitMAAAAASUVORK5CYII="}}]);