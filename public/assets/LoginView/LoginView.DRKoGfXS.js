import{_ as b,r as f,a as h,o as y,h as B,u as C,c as I,b as n,w as U,d as q,v as R,e as z,f as o,E as N,g,i as w,j as s,k as F,l as M,m as j,n as D,p as T,q as A,s as p,t as G}from"../index/index.BmeK54-v.js";/* empty css                           */const H={class:"login-container"},J={class:"login-box"},K={__name:"LoginView",setup(O){const _=C(),l=f(!1),u=f(),a=h({username:"",password:""}),v={username:[{required:!0,message:"输入用户名",trigger:"blur"}],password:[{required:!0,message:"输入密码",trigger:"blur"}]},V=async()=>{if(!u.value)return;await u.value.validate(),l.value=!0;const t=await A({path:"/user/login",data:{username:a.username.trim(),password:a.password.trim()}});if(t.success){const{uid:e,name:i,role:r}=t;p("panda_user_uid",e),p("panda_user_role",r),p("panda_user_name",encodeURIComponent(i)),_.push("/")}else G.error(t.message);l.value=!1};return y(()=>{if(B()){_.push("/");return}}),(t,e)=>{const i=g("User"),r=j,c=M,d=F,k=g("Lock"),x=D,E=N,L=R;return w(),I("div",H,[n("div",J,[e[3]||(e[3]=n("div",{class:"logo-box"},[n("img",{src:q,alt:"logo",class:"logo"})],-1)),e[4]||(e[4]=n("h2",null," 系统登录 ",-1)),U((w(),z(E,{model:a,rules:v,ref_key:"formRef",ref:u},{default:o(()=>[s(d,{prop:"username"},{default:o(()=>[s(c,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=m=>a.username=m),size:"large",placeholder:"用户名"},{prefix:o(()=>[s(r,null,{default:o(()=>[s(i)]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(d,{prop:"password"},{default:o(()=>[s(c,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=m=>a.password=m),size:"large",type:"password",placeholder:"密码","show-password":""},{prefix:o(()=>[s(r,null,{default:o(()=>[s(k)]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(d,null,{default:o(()=>[s(x,{type:"primary",size:"large",onClick:V,style:{width:"100%"}},{default:o(()=>e[2]||(e[2]=[T(" 登录 ")])),_:1})]),_:1})]),_:1},8,["model"])),[[L,l.value]])])])}}},S=b(K,[["__scopeId","data-v-a25a6cf6"]]);export{S as default};
